From 4e1e8150662b9a0e17b2f1f2011f1d1db6d9c405 Mon Sep 17 00:00:00 2001
From: yangjian <jianyang@bestechnic.com>
Date: Mon, 8 Nov 2021 21:17:36 +0800
Subject: [PATCH] feat: add liteos_m options

---
 components/aafwk.json      |  1 +
 components/ace.json        |  9 ++++-----
 components/appexecfwk.json |  1 +
 components/global.json     | 10 ++++------
 components/graphic.json    |  8 ++++----
 components/utils.json      |  3 +++
 components/vendor.json     |  6 ++++++
 7 files changed, 23 insertions(+), 15 deletions(-)

diff --git a/components/aafwk.json b/components/aafwk.json
index e71ad88..8ae543f 100755
--- a/components/aafwk.json
+++ b/components/aafwk.json
@@ -20,6 +20,7 @@
       ],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [
diff --git a/components/ace.json b/components/ace.json
index 8103970..ff25826 100755
--- a/components/ace.json
+++ b/components/ace.json
@@ -8,13 +8,12 @@
         "foundation/ace/ace_engine_lite"
       ],
       "targets": [
-        "//foundation/ace/ace_engine_lite/frameworks:jsfwk",
-        "//foundation/ace/ace_engine_lite/test:unittest"
+        "//foundation/ace/ace_engine_lite/frameworks:jsfwk"
       ],
       "rom": "521KB",
       "ram": "~82KB",
       "output": [ "libace_lite.so" ],
-      "adapted_kernel": [ "liteos_a", "linux"],
+      "adapted_kernel": [ "liteos_a", "liteos_m", "linux"],
       "features": [],
       "deps": {
         "third_party": [
@@ -58,7 +57,7 @@
       "rom": "9KB",
       "ram": "~2KB",
       "output": [ "libace_common.so" ],
-      "adapted_kernel": [ "liteos_a", "linux"],
+      "adapted_kernel": [ "liteos_a", "liteos_m", "linux"],
       "features": [],
       "deps": {
         "third_party": [
@@ -84,7 +83,7 @@
       "rom": "32KB",
       "ram": "~5KB",
       "output": [ "libace_native_engine.so" ],
-      "adapted_kernel": [ "liteos_a", "linux"],
+      "adapted_kernel": [ "liteos_a", "liteos_m", "linux"],
       "features": [],
       "deps": {
         "third_party": [
diff --git a/components/appexecfwk.json b/components/appexecfwk.json
index 4253651..79c0ab1 100755
--- a/components/appexecfwk.json
+++ b/components/appexecfwk.json
@@ -21,6 +21,7 @@
       ],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
diff --git a/components/global.json b/components/global.json
index 26ad50d..721857a 100644
--- a/components/global.json
+++ b/components/global.json
@@ -8,13 +8,12 @@
         "base/global/resmgr_lite"
       ],
       "targets": [
-        "//base/global/resmgr_lite/frameworks/resmgr_lite:global_resmgr",
-        "//base/global/resmgr_lite/frameworks/resmgr_lite/test:unittest"
+        "//base/global/resmgr_lite/frameworks/resmgr_lite:global_resmgr"
       ],
       "rom": "21KB",
       "ram": "~48KB",
       "output": [ "global_resmgr.so" ],
-      "adapted_kernel": [ "liteos_a" ],
+      "adapted_kernel": [ "liteos_a", "liteos_m" ],
       "features": [],
       "deps": {
         "third_party": [
@@ -33,13 +32,12 @@
         "base/global/i18n_lite"
       ],
       "targets": [
-        "//base/global/i18n_lite/frameworks/i18n:global_i18n",
-        "//base/global/i18n_lite/frameworks/i18n/test:I18nTest"
+        "//base/global/i18n_lite/frameworks/i18n:global_i18n"
       ],
       "rom": "2.5MB",
       "ram": "~112KB",
       "output": [ "global_i18n.so" ],
-      "adapted_kernel": [ "liteos_a" ],
+      "adapted_kernel": [ "liteos_a", "liteos_m" ],
       "features": [],
       "deps": {
         "third_party": [
diff --git a/components/graphic.json b/components/graphic.json
index 135ea4d..7fd1c2a 100644
--- a/components/graphic.json
+++ b/components/graphic.json
@@ -6,14 +6,14 @@
       "optional": "true",
       "dirs": ["foundation/graphic/utils"],
       "targets": [
-        "//foundation/graphic/utils:lite_graphic_utils",
-        "//foundation/graphic/utils/test:lite_graphic_utils_test"
+        "//foundation/graphic/utils:lite_graphic_utils"
       ],
       "rom": "",
       "ram": "",
       "output": ["libgraphic_utils.so"],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
@@ -117,14 +117,14 @@
       "optional": "true",
       "dirs": ["foundation/graphic/ui"],
       "targets": [
-        "//foundation/graphic/ui:lite_ui",
-        "//foundation/graphic/ui/test/unittest:lite_graphic_ui_test"
+        "//foundation/graphic/ui:lite_ui"
       ],
       "rom": "900KB",
       "ram": "~90KB",
       "output": ["libui.so"],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
diff --git a/components/utils.json b/components/utils.json
index 19cdb8b..972d477 100755
--- a/components/utils.json
+++ b/components/utils.json
@@ -125,6 +125,7 @@
       "output": [],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
@@ -152,6 +153,7 @@
       "output": [],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
@@ -187,6 +189,7 @@
       "output": [],
       "adapted_kernel": [
         "liteos_a",
+        "liteos_m",
         "linux"
       ],
       "features": [],
diff --git a/components/vendor.json b/components/vendor.json
index 4e5c4e9..d012f85 100755
--- a/components/vendor.json
+++ b/components/vendor.json
@@ -277,6 +277,12 @@
           "utils_base"
         ]
       }
+    },
+    {
+      "component": "custom",
+      "features": [],
+      "adapted_kernel": [ "liteos_m", "liteos_a", "linux" ],
+      "targets": []
     }
   ]
 }
-- 
2.17.1

