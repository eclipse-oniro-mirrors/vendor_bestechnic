From 9dab56955bf159ab64075dfd7ef48f03422798e2 Mon Sep 17 00:00:00 2001
From: leihuang <leihuang@bestechnic.com>
Date: Sun, 19 Sep 2021 14:24:37 +0800
Subject: [PATCH] feat: build libglobal_i18n.a for liteos_m

Signed-off-by: leihuang <leihuang@bestechnic.com>
Change-Id: Id3a98aab7f6fb92a310dd8909b2eb541f5fc53a6
---
 frameworks/i18n/BUILD.gn | 25 ++++++++++++++++++-------
 1 file changed, 18 insertions(+), 7 deletions(-)

diff --git a/frameworks/i18n/BUILD.gn b/frameworks/i18n/BUILD.gn
index 5687f70..9faeec0 100755
--- a/frameworks/i18n/BUILD.gn
+++ b/frameworks/i18n/BUILD.gn
@@ -47,13 +47,24 @@ copy("global_dat") {
 }
 
 if (defined(ohos_lite)) {
-  shared_library("global_i18n") {
-    sources = locale_sources
-    configs += [ ":locale_config" ]
-    deps = [
-      ":global_dat",
-      "//third_party/bounds_checking_function:libsec_shared",
-    ]
+  if (ohos_kernel_type == "liteos_m") {
+    static_library("global_i18n") {
+      sources = locale_sources
+      public_configs = [ ":locale_config" ]
+      deps = [
+        ":global_dat",
+        "//third_party/bounds_checking_function:libsec_static",
+      ]
+    }
+  } else {
+    shared_library("global_i18n") {
+      sources = locale_sources
+      configs += [ ":locale_config" ]
+      deps = [
+        ":global_dat",
+        "//third_party/bounds_checking_function:libsec_shared",
+      ]
+    }
   }
 
   lite_component("locale_lite") {
-- 
2.17.1

