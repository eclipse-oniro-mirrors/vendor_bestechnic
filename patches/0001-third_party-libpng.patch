From 22a061ebf64f2738993c11f6ba8595231c388bfc Mon Sep 17 00:00:00 2001
From: yangjian <jianyang@bestechnic.com>
Date: Sun, 9 Jan 2022 17:59:56 +0800
Subject: [PATCH] third_party/libpng/

Signed-off-by: yangjian <jianyang@bestechnic.com>
Change-Id: Ic08ed22d9dd3e0bf06b270b1c16905030cf4fd08
---
 BUILD.gn | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

diff --git a/BUILD.gn b/BUILD.gn
index e986ee1b2..423ebeac5 100755
--- a/BUILD.gn
+++ b/BUILD.gn
@@ -29,12 +29,16 @@ if (defined(ohos_lite)) {
   ]
 
   lite_library("libpng") {
-    target_type = "shared_library"
-    sources = libpng_source
+    if (ohos_kernel_type == "liteos_m") {
+      target_type = "static_library"
+      deps = [ "//build/lite/config/component/zlib:zlib_static" ]
+    } else {
+      target_type = "shared_library"
+      deps = [ "//build/lite/config/component/zlib:zlib_shared" ]
+    }
 
+    sources = libpng_source
     public_configs = [ ":libpng_config" ]
-
-    deps = [ "//build/lite/config/component/zlib:zlib_shared" ]
   }
 } else {
   import("//build/ohos.gni")
-- 
2.17.1

