From 369ce647a3e614bc2d6d7c30f0d2d118956027a0 Mon Sep 17 00:00:00 2001
From: yangjian <jianyang@bestechnic.com>
Date: Sun, 9 Jan 2022 17:59:01 +0800
Subject: [PATCH] third_party/libjpeg/

Signed-off-by: yangjian <jianyang@bestechnic.com>
Change-Id: I191fd6e29effe2ebb7db89febafb9423e2806f38
---
 BUILD.gn   | 6 +++++-
 jmorecfg.h | 2 +-
 2 files changed, 6 insertions(+), 2 deletions(-)
 mode change 100644 => 100755 jmorecfg.h

diff --git a/BUILD.gn b/BUILD.gn
index dda8df5..b37cd95 100755
--- a/BUILD.gn
+++ b/BUILD.gn
@@ -70,7 +70,11 @@ libjpeg_source = [
 
 if (defined(ohos_lite)) {
   lite_library("libjpeg") {
-    target_type = "shared_library"
+    if (ohos_kernel_type == "liteos_m") {
+      target_type = "static_library"
+    } else {
+      target_type = "shared_library"
+    }
     sources = libjpeg_source
 
     public_configs = [ ":libjpeg_config" ]
diff --git a/jmorecfg.h b/jmorecfg.h
old mode 100644
new mode 100755
index 679d68b..4e02eac
--- a/jmorecfg.h
+++ b/jmorecfg.h
@@ -213,7 +213,7 @@ typedef short INT16;
 #ifndef _BASETSD_H_		/* Microsoft defines it in basetsd.h */
 #ifndef _BASETSD_H		/* MinGW is slightly different */
 #ifndef QGLOBAL_H		/* Qt defines it in qglobal.h */
-typedef long INT32;
+typedef signed int INT32;
 #endif
 #endif
 #endif
-- 
2.17.1

