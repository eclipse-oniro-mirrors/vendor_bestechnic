/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.hml?entry":
/*!****************************************************************************************!*\
  !*** D:\work\display_small_wan1\entry\src\main\js\default\pages\index\index.hml?entry ***!
  \****************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

var $app_template$ = __webpack_require__(/*! !!./lib/json.js!./lib/template.js!./index.hml */ "./lib/json.js!./lib/template.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.hml")
var $app_style$ = __webpack_require__(/*! !!./lib/json.js!./lib/style.js!./index.css */ "./lib/json.js!./lib/style.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.css")
var $app_script$ = __webpack_require__(/*! !!./lib/script.js!./node_modules/babel-loader?presets[]=C:\Users\tangj\AppData\Local\Huawei\Sdk\js\3.0.0.0\build-tools\ace-loader\node_modules\@babel\preset-env&plugins[]=C:\Users\tangj\AppData\Local\Huawei\Sdk\js\3.0.0.0\build-tools\ace-loader\node_modules\@babel\plugin-transform-modules-commonjs&comments=false!./lib/resource-reference-script.js!./index.js */ "./lib/script.js!./node_modules/babel-loader/lib/index.js?presets[]=C:\\Users\\tangj\\AppData\\Local\\Huawei\\Sdk\\js\\3.0.0.0\\build-tools\\ace-loader\\node_modules\\@babel\\preset-env&plugins[]=C:\\Users\\tangj\\AppData\\Local\\Huawei\\Sdk\\js\\3.0.0.0\\build-tools\\ace-loader\\node_modules\\@babel\\plugin-transform-modules-commonjs&comments=false!./lib/resource-reference-script.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.js")
var options=$app_script$
 if ($app_script$.__esModule) {

      options = $app_script$.default;
 }
options.styleSheet=$app_style$
options.render=$app_template$;
module.exports=new ViewModel(options);

/***/ }),

/***/ "./lib/json.js!./lib/style.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.css":
/*!***************************************************************************************************************!*\
  !*** ./lib/json.js!./lib/style.js!D:\work\display_small_wan1\entry\src\main\js\default\pages\index\index.css ***!
  \***************************************************************************************************************/
/***/ (function(module) {

module.exports = {"@keyframes":{"disc":[{"transform":{"rotate":"0deg"},"time":0},{"transform":{"rotate":"360deg"},"time":100}]},"classSelectors":{"container":{"height":"100%","width":"100%"},"main":{"width":"100%","height":"100%","flexDirection":"column","justifyContent":"space-between","alignItems":"center"},"header":{"width":"100%","height":"12%","alignItems":"center","justifyContent":"center","backgroundColor":16747520,"color":16770244},"title":{"width":"100%","textAlign":"center","color":65535},"body":{"width":"100%","height":"60%","flexDirection":"column","justifyContent":"center","alignItems":"center"},"music":{"width":"50%","height":"85%","flexDirection":"column","justifyContent":"space-around","alignItems":"flex-start","backgroundColor":16711680},"disc-wrapper":{"width":204,"height":204,"borderRadius":102,"borderTopWidth":2,"borderRightWidth":2,"borderBottomWidth":2,"borderLeftWidth":2,"borderTopColor":16747520,"borderRightColor":16747520,"borderBottomColor":16747520,"borderLeftColor":16747520},"disc":{"width":200,"height":200,"justifyContent":"center","alignItems":"center","animationName":"disc","animationDuration":"10s","animationIterationCount":"infinite"},"footer":{"width":"100%","height":"25%"},"musicWrapper":{"width":"100%","height":"85%","flexDirection":"row","justifyContent":"space-around","alignItems":"center"},"musicName":{"width":"100%","height":20,"fontSize":30,"backgroundColor":255},"singer":{"width":"100%","height":20,"fontSize":25,"backgroundColor":255},"progress-Wrapper":{"width":"100%","height":"15%","flexDirection":"row","color":16776960,"backgroundColor":65535,"justifyContent":"center"},"playTime":{"width":"33%","textAlign":"right","color":3050327},"allTime":{"width":"33%","textAlign":"left","marginLeft":18,"color":10658466},"progressBar":{"width":"33%","height":32,"selectedColor":16777215,"blockColor":16777215,"color":4210752,"marginLeft":18,"marginTop":8},"controlBar":{"width":"100%","height":"100%","flexDirection":"row","justifyContent":"center","alignItems":"center","backgroundColor":6591981},"modeBtn":{"width":36,"height":36,"marginLeft":10,"color":16777200},"previousBtn":{"width":56,"height":56,"marginLeft":30,"color":65535},"nextBtn":{"width":56,"height":56,"marginLeft":30},"playBtn":{"width":98,"height":98,"marginLeft":30},"listBtn":{"width":36,"height":36,"marginLeft":30},"list-Wrapper":{"width":"100%","height":"60%","top":"15%","flexDirection":"column","backgroundColor":"#e6333333"},"listText":{"width":"50%","fontSize":30,"textAlign":"center","color":"#e9fcfffa"},"musicList":{"width":"100%","height":"100%","backgroundColor":3355443,"color":9109504},"listItem":{"width":"100%","height":"15%","color":16775388,"backgroundColor":4210752},"itemWrapper":{"width":"100%","height":"100%","textAlign":"center","alignItems":"center","marginTop":8,"borderRadius":10,"borderTopWidth":1,"borderRightWidth":1,"borderBottomWidth":1,"borderLeftWidth":1,"borderTopColor":"#22000000","borderRightColor":"#22000000","borderBottomColor":"#22000000","borderLeftColor":"#22000000","backgroundColor":35723},"space-Wrapper":{"width":"100%","height":"100%","textAlign":"center","alignItems":"center","borderTopWidth":1,"borderRightWidth":1,"borderBottomWidth":1,"borderLeftWidth":1,"borderTopColor":"#22000000","borderRightColor":"#22000000","borderBottomColor":"#22000000","borderLeftColor":"#22000000","backgroundColor":16775388},"itemName":{"width":"50%","height":"100%","color":16766720,"textAlign":"center"},"itemSinger":{"width":"50%","height":"100%","color":16766720,"textAlign":"center"},"MDBtn":{"width":56,"height":56,"marginLeft":-30}}}

/***/ }),

/***/ "./lib/json.js!./lib/template.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.hml":
/*!******************************************************************************************************************!*\
  !*** ./lib/json.js!./lib/template.js!D:\work\display_small_wan1\entry\src\main\js\default\pages\index\index.hml ***!
  \******************************************************************************************************************/
/***/ (function(module) {

module.exports = function (vm) { var _vm = vm || this; return _c('stack', {'staticClass' : ["container"],'onBubbleEvents' : {'swipe' : _vm.swipeEvent}} , [_c('div', {'staticClass' : ["main"]} , [_c('div', {'staticClass' : ["header"]} , [_c('image', {'attrs' : {'src' : "common/ic_back.png"},'staticClass' : ["back"],'onBubbleEvents' : {'click' : _vm.exitApp}} ),_c('text', {'attrs' : {'value' : "音乐播放器"},'staticClass' : ["title"]} )] ),_c('div', {'staticClass' : ["body"]} , [_c('div', {'staticClass' : ["musicWrapper"]} , [_c('div', {'staticClass' : ["disc-wrapper"]} , [_c('image', {'attrs' : {'src' : function () {return _vm.disImage}},'staticClass' : ["disc"]} )] ),_c('div', {'staticClass' : ["music"]} , [_c('marquee', {'attrs' : {'scrollamount' : 15,'value' : function () {return _vm.curMusic.curMusicName}},'staticClass' : ["musicName"]} ),_c('marquee', {'attrs' : {'scrollamount' : 15,'value' : function () {return _vm.curMusic.singer}},'staticClass' : ["singer"]} )] )] ),_c('div', {'staticClass' : ["progress-Wrapper"]} , [_c('text', {'attrs' : {'value' : function () {return _vm.curMusic.playTime}},'staticClass' : ["playTime"]} ),_c('slider', {'attrs' : {'min' : 0,'max' : 100,'value' : function () {return _vm.playProgress}},'staticClass' : ["progressBar"],'onBubbleEvents' : {'change' : _vm.changeProgress}} ),_c('text', {'attrs' : {'value' : function () {return _vm.curMusic.allTime}},'staticClass' : ["allTime"]} )] )] ),_c('div', {'staticClass' : ["footer"]} , [_c('div', {'staticClass' : ["controlBar"]} , [_c('image', {'attrs' : {'src' : function () {return _vm.modeImage}},'staticClass' : ["modeBtn"],'onBubbleEvents' : {'click' : _vm.changeMode}} ),_c('image', {'attrs' : {'src' : "common/ic_music_share.png"},'staticClass' : ["MDBtn"],'onBubbleEvents' : {'click' : _vm.openDailog}} ),_c('image', {'attrs' : {'src' : "common/ic_music_previous.png"},'staticClass' : ["previousBtn"],'onBubbleEvents' : {'click' : function (evt) {_vm.changeSong('previous',evt)}}} ),_c('image', {'attrs' : {'src' : function () {return _vm.playImage}},'staticClass' : ["playBtn"],'onBubbleEvents' : {'click' : _vm.playMusic}} ),_c('image', {'attrs' : {'src' : "common/ic_music_next.png"},'staticClass' : ["nextBtn"],'onBubbleEvents' : {'click' : function (evt) {_vm.changeSong('next',evt)}}} ),_c('image', {'attrs' : {'src' : "common/ic_music_list.png"},'staticClass' : ["listBtn"],'onBubbleEvents' : {'click' : _vm.changePage}} )] )] )] ),_c('div', {'attrs' : {'show' : function () {return _vm.showMusicList}},'staticClass' : ["list-Wrapper"]} , [_c('text', {'attrs' : {'value' : "播放列表"},'staticClass' : ["listText"]} ),_c('list', {'attrs' : {'ref' : "musicList"},'staticClass' : ["musicList"]} , [_l((function () {return _vm.musicList}),function($item,$idx){return _c('list-item', {'attrs' : {'value' : ">"},'staticClass' : ["listItem"],'onBubbleEvents' : {'click' : function (evt) {_vm.clickListItem($idx,evt)}}} , [_c('div', {'staticClass' : ["space-Wrapper"]} , [_c('div', {'staticClass' : ["itemWrapper"]} , [_c('text', {'attrs' : {'value' : function () {return $item.name}},'staticClass' : ["itemName"]} ),_c('text', {'attrs' : {'value' : function () {return $item.singer}},'staticClass' : ["itemSinger"]} )] )] )] )})] )] )] ) }

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
  \**********************************************************************/
/***/ (function(module) {

"use strict";


function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
module.exports.default = module.exports, module.exports.__esModule = true;

function requireModule(moduleName) {
  return requireNative(moduleName.slice(1));
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/newArrowCheck.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/newArrowCheck.js ***!
  \**************************************************************/
/***/ (function(module) {

"use strict";


function _newArrowCheck(innerThis, boundThis) {
  if (innerThis !== boundThis) {
    throw new TypeError("Cannot instantiate an arrow function");
  }
}

module.exports = _newArrowCheck;
module.exports.default = module.exports, module.exports.__esModule = true;

function requireModule(moduleName) {
  return requireNative(moduleName.slice(1));
}


/***/ }),

/***/ "./lib/script.js!./node_modules/babel-loader/lib/index.js?presets[]=C:\\Users\\tangj\\AppData\\Local\\Huawei\\Sdk\\js\\3.0.0.0\\build-tools\\ace-loader\\node_modules\\@babel\\preset-env&plugins[]=C:\\Users\\tangj\\AppData\\Local\\Huawei\\Sdk\\js\\3.0.0.0\\build-tools\\ace-loader\\node_modules\\@babel\\plugin-transform-modules-commonjs&comments=false!./lib/resource-reference-script.js!D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.js":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./lib/script.js!./node_modules/babel-loader/lib/index.js?presets[]=C:\Users\tangj\AppData\Local\Huawei\Sdk\js\3.0.0.0\build-tools\ace-loader\node_modules\@babel\preset-env&plugins[]=C:\Users\tangj\AppData\Local\Huawei\Sdk\js\3.0.0.0\build-tools\ace-loader\node_modules\@babel\plugin-transform-modules-commonjs&comments=false!./lib/resource-reference-script.js!D:\work\display_small_wan1\entry\src\main\js\default\pages\index\index.js ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";


var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.default = void 0;

var _newArrowCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/newArrowCheck */ "./node_modules/@babel/runtime/helpers/newArrowCheck.js"));

var _system = _interopRequireDefault(requireModule("@system.router"));

var _system2 = _interopRequireDefault(requireModule("@system.audio"));

var _system3 = _interopRequireDefault(requireModule("@system.file"));

var _system4 = _interopRequireDefault(requireModule("@system.app"));

var modeImages = ['common/ic_music_listorder.png', 'common/ic_music_listcycle.png', 'common/ic_music_shuffle.png', 'common/ic_music_singlecycle.png'];
var _default = {
  data: {
    showMusicList: false,
    playMode: 1,
    modeImage: 'common/ic_music_listcycle.png',
    playImage: 'common/ic_music_play.png',
    disImage: 'common/dis.png',
    playProgress: 0,
    curMusicIndex: 0,
    playStatus: 2,
    curMusic: {
      curMusicName: "",
      singer: "",
      playTime: "00:00",
      allTime: "00:00"
    },
    musicList: []
  },
  onInit: function onInit() {
    var _this = this;

    _system2["default"].onplay = function () {
      (0, _newArrowCheck2["default"])(this, _this);
      console.log("onplay start");
      this.curMusic.allTime = this.timeChange(_system2["default"].duration);
      this.playStatus = 0;
    }.bind(this);

    _system2["default"].ontimeupdate = function () {
      (0, _newArrowCheck2["default"])(this, _this);

      if (_system2["default"].duration == null || _system2["default"].duration <= 0) {
        return;
      }

      console.log("ontime update:");
      this.curMusic.playTime = this.timeChange(_system2["default"].currentTime);
      console.log("ontime update:" + this.curMusic.playTime);
      this.playProgress = Math.floor(_system2["default"].currentTime * 100 / _system2["default"].duration);
      console.log("ontime update progress:" + this.playProgress + ",duration:" + _system2["default"].duration);
    }.bind(this);

    _system2["default"].onerror = function () {
      (0, _newArrowCheck2["default"])(this, _this);
      console.log("onerror");
      this.changeSong();
    }.bind(this);

    _system2["default"].onended = function () {
      (0, _newArrowCheck2["default"])(this, _this);
      console.log("onend");
      this.playStatus = 2;

      if (this.playMode == 0 && this.curMusicIndex == this.musicList.length - 1) {
        this.playStatus = 2;
        this.playImage = "common/ic_music_play.png";
        console.log("played the last song in sequential mode");
        return;
      }

      var mode = "";

      if (this.playMode == 2) {
        console.log("random");
        mode = "random";
      }

      this.changeSong(mode);
    }.bind(this);

    this.getMusicList();
  },
  onDestroy: function onDestroy() {
    this.stopPlay();
  },
  clickListItem: function clickListItem(index) {
    console.log("listItemClick:start:" + index);

    if (index == undefined || index == null) {
      index = 0;
    }

    this.curMusicIndex = index;
    this.playStatus = 2;
    this.playMusic();
    this.showMusicList = false;
    console.log("listItemClick:end");
  },
  changeProgress: function changeProgress(value) {
    console.log("changeProgress start:" + value.progress);

    if (value == null || value.progress == null) {
      return;
    }

    if (this.playStatus == 2) {
      return;
    }

    var val = Math.floor(value.progress / 100 * _system2["default"].duration);
    console.log("changeProgress change:" + val);
    _system2["default"].currentTime = val;
    console.log("changeProgress end:");
  },
  playMusic: function playMusic() {
    console.log("playMusic:start");
    this.playImage = "common/ic_music_pause.png";

    if (this.playStatus == 1) {
      _system2["default"].play();

      this.playStatus = 0;
      console.log("playMusic:play");
      return;
    } else if (this.playStatus == 0) {
      this.playImage = "common/ic_music_play.png";

      _system2["default"].pause();

      this.playStatus = 1;
      console.log("playMusic:pause");
      return;
    }

    if (this.curMusicIndex == null) {
      this.curMusicIndex = 0;
    }

    var music = this.musicList[this.curMusicIndex];

    if (music != null) {
      this.playProgress = 0;
      this.curMusic.curMusicName = music.name;
      this.curMusic.singer = music.singer;
      _system2["default"].src = music.src;
      console.log("playMusic:src:" + music.src);

      _system2["default"].play();

      if (this.playMode == 3) {
        _system2["default"].loop = true;
      } else {
        _system2["default"].loop = false;
      }

      console.log("playMusic:end");
    }
  },
  stopPlay: function stopPlay() {
    console.log("stopPlay");
    _system2["default"].src = null;
    _system2["default"].onstop = null;
    _system2["default"].onplay = null;
    _system2["default"].ontimeupdate = null;
    _system2["default"].onerror = null;
  },
  changeMode: function changeMode() {
    console.log("changeMode start");

    if (this.playMode == 3) {
      this.playMode = 0;
    } else {
      this.playMode++;
    }

    if (this.playMode == 3) {
      _system2["default"].loop = true;
    } else {
      _system2["default"].loop = false;
    }

    console.log("changeMode:" + this.playMode);
    this.modeImage = modeImages[this.playMode];
  },
  changeSong: function changeSong(mode) {
    console.log("ChangeSong:start");

    if (this.playStatus == 0 || this.playStatus == 1) {
      this.playStatus = 2;
    }

    if (this.playMode == 2) {
      mode = "random";
    }

    if (mode == "previous") {
      this.curMusicIndex == 0 ? this.curMusicIndex = this.musicList.length - 1 : this.curMusicIndex--;
      console.log("ChangeSong:previous:" + this.curMusicIndex);
    } else if (mode == "random") {
      this.curMusicIndex = parseInt(Math.random() * this.musicList.length, 10);
      console.log("ChangeSong:random:" + this.curMusicIndex);
    } else {
      this.curMusicIndex == this.musicList.length - 1 ? this.curMusicIndex = 0 : this.curMusicIndex++;
      console.log("ChangeSong:next" + this.curMusicIndex);
    }

    this.curMusic.curMusicName = this.musicList[this.curMusicIndex].name;
    this.curMusic.singer = this.musicList[this.curMusicIndex].singer;
    this.playMusic();

    if (this.showMusicList) {
      this.$refs.musicList.scrollTo({
        index: this.curMusicIndex == 0 ? 0 : this.curMusicIndex - 1
      });
    }

    console.log("ChangeSong:end");
  },
  timeChange: function timeChange(seconds) {
    console.log("timeChange:start:" + seconds);

    if (seconds == null || seconds < 0) {
      return "00:00";
    }

    var minute,
        second = 0;
    minute = Math.floor(seconds / 60);
    second = Math.floor(seconds % 60);
    var result = (minute > 9 ? minute : "0" + minute) + ":" + (second > 9 ? second : "0" + second);
    console.log("timeChange:end:" + result);
    return result;
  },
  changePage: function changePage(operation) {
    console.log("changePage:start");

    if (operation != null && operation == "close") {
      console.log("operation != null && operation == close");
      this.showMusicList = false;
      return;
    }

    '';
    this.showMusicList = !this.showMusicList;
    console.log("changePage: showMusicList " + this.showMusicList);

    if (this.showMusicList) {
      console.log("changePage: showMusicList index " + this.curMusicIndex);
      this.$refs.musicList.scrollTo({
        index: this.curMusicIndex == 0 ? 0 : this.curMusicIndex - 1
      });
    }
  },
  exitApp: function exitApp() {
    console.log("start exit");

    _system4["default"].terminate();

    console.log("end exit");
  },
  swipeEvent: function swipeEvent(e) {
    if (e.direction == "right") {
      console.log("start exit");
      this.exitApp();
    }
  },
  getMusicList: function getMusicList() {
    var that = this;

    _system3["default"].readText({
      uri: "internal://app/musicList.txt",
      success: function success(data) {
        console.log(data.text);
        var music = JSON.parse(data.text);
        console.log("---------" + music);

        if (music != null) {
          that.musicList = music;
        }
      },
      fail: function fail(data, code) {
        console.log("get music list failed :" + code);
      }
    });
  },
  openDailog: function openDailog() {
    _system["default"].replace({
      uri: "pages/dmstep6/dmstep6"
    });
  }
};
exports.default = _default;

function requireModule(moduleName) {
  return requireNative(moduleName.slice(1));
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("D:\\work\\display_small_wan1\\entry\\src\\main\\js\\default\\pages\\index\\index.hml?entry");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=index.js.map